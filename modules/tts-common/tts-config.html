<!DOCTYPE html>
<html prefix="dc: http://purl.org/dc/elements/1.1/
              dp2: http://www.daisy.org/ns/pipeline/">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <title>Text-To-Speech Configuration</title>
    
  <meta prefix="dc: http://purl.org/dc/elements/1.1/" property="dc:title" content="Text-To-Speech Configuration">


    <link rel="stylesheet" href="/pipeline/css/default.css">
    <link rel="stylesheet" href="/pipeline/css/coderay.css">
    <link rel="shortcut icon" href="http://www.daisy.org/sites/default/files/favicon_0.ico">

  </head>
  <body>
    <div id="body">
      <nav id="nav-sitemap">
  
  <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline" tabindex="1">
      
      Home
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Download.html" tabindex="2">
      
      Download
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help" tabindex="3">
      Help
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide" tabindex="6">
      User Guide
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Installation" tabindex="7">
      
      Installation
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/wiki/gui/DAISY-Pipeline-2-User-Guide" tabindex="8">
      
      Desktop Application
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/wiki/webui/User-Guide" tabindex="9">
      Web Application
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/wiki/webui/Templating" tabindex="10">
      
      Templating
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/wiki/webui/Administrator-settings" tabindex="11">
      
      Administrator Settings
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Pipeline-as-Service" tabindex="12">
      Pipeline as a Service
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/wiki/Configuration-Files" tabindex="13">
      
      Configuration Files
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Get-Help/User-Guide/Command-Line.html" tabindex="14">
      
      Command Line Tool
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Get-Help/User-Guide/Scripts.html" tabindex="15">
      Scripts
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-validator" tabindex="16">
      
      DAISY 2.02 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy202-to-epub3" tabindex="17">
      
      DAISY 2.02 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-daisy202" tabindex="18">
      
      DAISY 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/daisy3-to-epub3" tabindex="19">
      
      DAISY 3 to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-validator" tabindex="20">
      
      DTBook Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-daisy3" tabindex="21">
      
      DTBook to DAISY 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-epub3" tabindex="22">
      
      DTBook to EPUB3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-html" tabindex="23">
      
      DTBook to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/dtbook-to-pef" tabindex="24">
      
      DTBook to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/dtbook-to-zedai" tabindex="25">
      
      DTBook to ZedAI
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-validator" tabindex="26">
      
      EPUB 3 Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/epub3-to-daisy202" tabindex="27">
      
      EPUB 3 to DAISY 2.02
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/epub3-to-pef" tabindex="28">
      
      EPUB 3 to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/html-to-epub3" tabindex="29">
      
      HTML to EPUB3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/html-to-pef" tabindex="30">
      
      HTML to PEF
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/nimas-fileset-validator" tabindex="31">
      
      NIMAS Fileset Validator
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-epub3" tabindex="32">
      
      ZedAI to EPUB 3
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/zedai-to-html" tabindex="33">
      
      ZedAI to HTML
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/modules/braille/zedai-to-pef" tabindex="34">
      
      ZedAI to PEF
      </a>
    
    </li>
  
</ul>

    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="http://www.daisy.org/forums/pipeline-2" class="external-link" target="_blank" tabindex="35">
      
      Forums
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      <a href="/pipeline/Contribute" tabindex="4">
      Contribute
      </a>
      
      <ul class="spine">
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/daisy/pipeline" class="external-link" target="_blank" tabindex="36">
      
      Source Code
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="https://groups.google.com/forum/#!forum/daisy-pipeline-dev" class="external-link" target="_blank" tabindex="37">
      
      Developers Mailing List
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="https://github.com/search?utf8=%E2%9C%93&amp;type=Issues&amp;q=+repo%3Adaisy%2Fpipeline+repo%3Adaisy%2Fpipeline-assembly+repo%3Adaisy%2Fpipeline-framework+repo%3Adaisy%2Fpipeline-scripts+repo%3Adaisy%2Fpipeline-build-utils+repo%3Adaisy%2Fpipeline-webui+repo%3Asnaekobbi%2Fbraille-css+repo%3Asnaekobbi%2FjStyleParser+repo%3Abrailleapps%2Fdotify.api+repo%3Abrailleapps%2Fdotify.formatter.impl" class="external-link" target="_blank" tabindex="38">
      
      Issue Tracker
      </a>
    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="/pipeline/Contribute/Developer-Guide.html" tabindex="39">
      
      Developer Guide
      </a>
    
    </li>
  
</ul>

    
    </li>
  
    
      
        <li class="spine-item">
      
      
        <a href="http://www.daisy.org" class="external-link" target="_blank" tabindex="5">
      
      DAISY Home
      </a>
    
    </li>
  
</ul>

</nav>



<script type="text/javascript">
var onload = function() {
  var nav = document.getElementById('nav-sitemap');
  var navTopBefore = nav.offsetTop;
  var fixed = (navTopBefore < window.pageYOffset);
  if (fixed) {
    nav.classList.add('fixed');
  }
  // FIXME: this is a hack! styling should not be handled here!
  var body = document.getElementsByTagName('body')[0];
  var leftNav = document.getElementById('nav-sitemap-left');
  var setLeftNavHeight = function() {
    if (fixed) {
      leftNav.style.height = (window.innerHeight - 34) + "px";
    } else {
      leftNav.style.height = Math.max(window.innerHeight - 219, body.offsetHeight - 175) + "px";
	  // "height: auto" doesn't work if the auto height of leftNav is greater
	  // than window.innerHeight and body.offsetHeight: it would mess up the
	  // transition because the transition would influence the pageYOffset
	  // and thereby canceling itself, making it impossible to scroll down.
    }
  }
  setLeftNavHeight();
  window.onscroll = function(e) {
    if (fixed && window.pageYOffset < navTopBefore) {
      nav.classList.remove('fixed');
	  fixed = false;
      setLeftNavHeight();
    } else if (!fixed && window.pageYOffset > navTopBefore) {
      nav.classList.add('fixed');
	  fixed = true;
      setLeftNavHeight();
    }
  }
  window.onresize = setLeftNavHeight;
};
if (window.addEventListener) {
  window.addEventListener('load', onload);
} else {
  window.attachEvent('onload', onload);
}
</script>


      <h1 id="text-to-speech-configuration">Text-To-Speech Configuration</h1>

<p>The following scripts support the production of an aural presentation
of the document via speech synthesis, or “text-to-speech” (TTS):</p>

<ul>
  <li>
<a href="/pipeline/modules/dtbook-to-daisy3">dtbook-to-daisy3</a>,</li>
  <li>
<a href="/pipeline/modules/dtbook-to-epub3">dtbook-to-epub3</a> and</li>
  <li><a href="/pipeline/modules/zedai-to-epub3">zedai-to-epub3</a></li>
</ul>

<p>The result is either an audio-only version of the document, or the
combination of a text layer and an audio layer synchronized with each
other.</p>

<p>The way text-to-speech is configured is common to all scripts. Speech
engines are configured with special properties, and the exact aural
rendering of the document (TTS voices, pronunciations, speech pitch,
speech rates, speech levels, etc.) is controlled with CSS style sheets
and PLS lexicons.</p>

<p>TTS configuration files may contain properties, links to aural CSS
style sheets, and links to PLS lexicons. The file format is as
follows:</p>

<div class="highlighter-coderay">
<div class="CodeRay">
  <div class="code"><pre><span class="tag">&lt;config&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">"</span><span class="content">acapela.samplerate</span><span class="delimiter">"</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">"</span><span class="content">44100</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;css</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">css/aural.css</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;lexicon</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">"</span><span class="content">lexicons/fr.pls</span><span class="delimiter">"</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/config&gt;</span>
</pre></div>
</div>
</div>

<!--
TODO: what about <voice engine="acapela"
                        name="claire"
                        lang="fr"
                        gender="female-adult"
                        priority="12"/>
TODO: what about <annotations type="" href="">
                    ...
                 </annotations>
-->

<p>Configuration files may either be specified “statically”, through the
system property
<a href="/pipeline/wiki/Configuration-Files#system-properties"><code>tts.config</code></a>,
or “dynamically” through a script input.</p>

<!--
TODO: invent a media type, for example: `application/vnd.pipeline.tss-config+xml`
-->

<h2 id="engine-configuration">Engine configuration</h2>

<p>TTS engines are configured with global properties. The following
properties are available:</p>

<h3 id="common-settings">Common settings</h3>

<dl>
  <dt><code>audio.tmpdir</code></dt>
  <dd>Temporary directory used during audio synthesis</dd>
  <dd>Defaults to “${java.io.tmpdir}”</dd>
  <dt><code>threads.number</code></dt>
  <dd>Number of threads for audio encoding and regular text-to-speech</dd>
  <dd>Defaults to the number of processors available to the JVM</dd>
  <dt><code>threads.encoding.number</code></dt>
  <dd>Number of audio encoding threads</dd>
  <dd>Defaults to <code>threads.number</code> if not specified</dd>
  <dt><code>threads.speaking.number</code></dt>
  <dd>Number of regular text-to-speech threads</dd>
  <dd>Defaults to <code>threads.number</code> if not specified</dd>
  <dt><code>threads.each.memlimit</code></dt>
  <dd>Maximum amount of memory consumed by each text-to-speech thread (in Mb)</dd>
  <dd>Defaults to “20”</dd>
  <dt><code>encoding.speed</code></dt>
  <dd>Maximum number of seconds of encoded audio per seconds of encoding</dd>
  <dd>Defaults to “2.0”</dd>
</dl>

<h3 id="acapela">Acapela</h3>

<dl>
  <dt><code>acapela.samplerate</code></dt>
  <dd>Sample rate (in Hz)</dd>
  <dd>Defaults to “22050”</dd>
  <dt><code>acapela.threads.reserved</code></dt>
  <dd>Number of reserved text-to-speech threads</dd>
  <dd>Defaults to “3”</dd>
  <dt><code>acapela.speed</code></dt>
  <dd>Defaults to “300”</dd>
  <dt><code>acapela.servers</code></dt>
  <dd>Defaults to “localhost:0”</dd>
  <dt><code>acapela.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “15”</dd>
</dl>

<h3 id="att">AT&amp;T</h3>

<dl>
  <dt><code>att.servers</code></dt>
  <dd>Defaults to “localhost:8888”</dd>
  <dt><code>att.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “10”</dd>
</dl>

<h3 id="espeak">eSpeak</h3>

<dl>
  <dt><code>espeak.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “2”</dd>
</dl>

<h3 id="mac-os">Mac OS</h3>

<dl>
  <dt><code>osxspeech.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “2”</dd>
</dl>

<h3 id="sapi">SAPI</h3>

<dl>
  <dt><code>sapi.samplerate</code></dt>
  <dd>Sample rate (in Hz)</dd>
  <dd>Defaults to “22050”</dd>
  <dt><code>sapi.bytespersample</code></dt>
  <dd>Defaults to “2”</dd>
  <dt><code>sapi.priority</code></dt>
  <dd>This engine is chosen over another engine that serves the same voice
if this one has a higher priority.</dd>
  <dd>Defaults to “7”</dd>
</dl>

<h3 id="lame-encoder">LAME encoder</h3>

<dl>
  <dt><code>lame.path</code></dt>
  <dd>Path to LAME executable</dd>
  <dd>If not specified, will automatically look for “lame” in the
directories specified by the environment variable “PATH”</dd>
  <dt><code>lame.cli.options</code></dt>
  <dd>Additional command line options passed to lame</dd>
</dl>

<h2 id="css">CSS</h2>

<!-- TODO: update to CSS 3: https://www.w3.org/TR/css3-speech -->

<p>The CSS properties that are supported by DAISY Pipeline are:</p>

<dl>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-voice-family" class="external-link" target="_blank"><code>voice-family</code></a></dt>
  <dd>Used for selecting a voice based on gender, age, name and/or vendor.
<!-- see also CSS3 "voice-family" property -->
<!-- see also <ssml:voice> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speak" class="external-link" target="_blank"><code>speak</code></a></dt>
  <dd>Used for preventing certain text to be rendered aurally, or for
spelling text one letter at a time.
<!-- see also CSS3 "speak" and "speak-as" properties -->
<!-- see also <ssml:say-as interpret-as="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-volume" class="external-link" target="_blank"><code>volume</code></a></dt>
  <dd>Used for controlling the loudness of the speech.
<!-- see also CSS3 "voice-volume" property -->
<!-- see also <ssml:prosody volume="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pitch" class="external-link" target="_blank"><code>pitch</code></a></dt>
  <dd>Used for controlling the average pitch of the speech.
<!-- see also CSS3 "voice-pitch" property -->
<!-- see also <ssml:prosody pitch="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speech-rate" class="external-link" target="_blank"><code>speech-rate</code></a></dt>
  <dd>Used for controlling the rate of the speech in terms of words per
minute.
<!-- see also CSS3 "voice-rate" property -->
<!-- see also <ssml:prosody rate="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pitch-range" class="external-link" target="_blank"><code>pitch-range</code></a></dt>
  <dd>Used for controlling the variation in average pitch of the speech.
<!-- see also CSS3 "voice-range" property -->
<!-- see also <ssml:prosody range="..."> -->
</dd>
  <dt><a href="https://www.w3.org/TR/CSS2/aural.html#propdef-speak-numeral" class="external-link" target="_blank"><code>speak-numeral</code></a></dt>
  <dd>Used for speaking out numbers one digit at a time.
<!-- see also CSS3 "speak-as" property -->
<!-- see also <ssml:say-as interpret-as="..."> -->
</dd>
  <dt>
<a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause-before" class="external-link" target="_blank"><code>pause-before</code></a>, <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause-after" class="external-link" target="_blank"><code>pause-after</code></a> and <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-pause" class="external-link" target="_blank"><code>pause</code></a>
</dt>
  <dd>Used for specifying silences with a certain duration before or
after an element.
<!-- see also <ssml:break time="..."> -->
</dd>
  <dt>
<a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue-before" class="external-link" target="_blank"><code>cue-before</code></a>, <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue-after" class="external-link" target="_blank"><code>cue-after</code></a> and <a href="https://www.w3.org/TR/CSS2/aural.html#propdef-cue" class="external-link" target="_blank"><code>cue</code></a>
</dt>
  <dd>Used for playing pre-recorded sound clips before or after an
element.
<!-- see also <ssml:audio src="..."> -->
</dd>
</dl>

<!--
- [`stress`](https://www.w3.org/TR/CSS2/aural.html#propdef-stress)
- [`richness`](https://www.w3.org/TR/CSS2/aural.html#propdef-richness)
- [`azimuth`](https://www.w3.org/TR/CSS2/aural.html#propdef-azimuth)
- [`play-during`](https://www.w3.org/TR/CSS2/aural.html#propdef-play-during)
- [`elevation`](https://www.w3.org/TR/CSS2/aural.html#propdef-elevation)
- [`speak-punctuation`](https://www.w3.org/TR/CSS2/aural.html#propdef-speak-punctuation)
- [`speak-header`](https://www.w3.org/TR/CSS2/aural.html#propdef-speak-header)
-->

<h2 id="pls">PLS</h2>

<p>PLS lexicons allow you to define the pronunciations of words. When a
word is defined in a lexicon the TTS engine will use the provided
pronunciation in place of the default rendering. A PLS lexicon is an
XML file. The syntax is defined in
<a href="https://www.w3.org/TR/pronunciation-lexicon" class="external-link" target="_blank">https://www.w3.org/TR/pronunciation-lexicon</a>.</p>

    </div>
  </body>
</html>
